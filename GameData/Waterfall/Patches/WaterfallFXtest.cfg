

@PART[nuclearEngine]:AFTER[ReStock]
{
  MODULE
  {
    name = ModuleWaterfallFX
    moduleID = nuclearEngine
    // This links the effects to a given ModuleEngines
    engineID = basicEngine

    // List out all controllers we want available
    CONTROLLER
    {
      name = atmosphereDepth
      linkedTo = atmosphere_density
    }
    CONTROLLER
    {
      name = throttle
      linkedTo = throttle
    }

    // List of all EFFECTS
    EFFECT
    {
      // Alias for things
      name = outerShell
      parentName = thrustTransform
      MODEL
      {
        path = Waterfall/Assets/wf_test_basic

        positionOffset = 0, 0, 0
        rotationOffset = 0, 0, 0
        // Base material properties
        MATERIAL
        {
          transform = FX
          shader = Waterfall/DoubleFresnelShader
          TEXTURE
          {
            textureSlotName = _MainTex
            texturePath = Waterfall/Assets/waterfall-glow-test-2
            textureScale = 1, 1.0
          }
          TEXTURE
          {
            textureSlotName = _DetailTex
            texturePath = Waterfall/Assets/fx-noise-1
            textureScale = 2, .75
          }
          COLOR
          {
            colorName = _TintColor
            value = 0.804 0.804 0.804 0.624
          }
        }
      }
      COLORMODIFIER
      {
        name = throttlefade
        // This should link to the NAME of the controller
        controllerName = throttle
        // Type for combination
        combinationType = REPLACE
        
        colorName = _TintColor
        // The object to color
        transformName = FX
        rCurve
        {
          key = 0 0 
          key = 1 1
        }
        gCurve
        {
          key = 0 0 
          key = 1 1
        }
        bCurve
        {
          key = 0 0 
          key = 1 1 
        }
        aCurve
        {
          key = 0 0 
          key = 0.2 .8 
          key = 1 1 
        }
      }
      UVOFFSETMODIFIER
      {
        name = throttlescroll
        // This should link to the NAME of the controller
        controllerName = throttle
        // Type for combination
        combinationType = REPLACE
        
        textureName = _DetailTex
        // The object to scroll
        transformName = FX
        scrollCurveX
        {
          key = 0 0 
          key = 1 0 
        }
        scrollCurveY
        {
          key = 0 2
          key = 1 6 
        }
      }
      SCALEMODIFIER
      {
        name = throatScale
        // This should link to the NAME of the controller
        controllerName = atmosphereDepth
        // Type fo combination
        combinationType = MULTIPLY

        // The object to scale
        transformName = B_NozzleExit
        xCurve
        {
          key = 0 0.25 
          key = 1 0.25
        }
        yCurve
        {
          key = 0 0.08
          key = 1 0.25
        }
        zCurve
        {
          key = 0 0.25
          key = 1 0.25 
        }
      }

      SCALEMODIFIER
      {
        name = PlumeScale
        // This should link to the NAME of the controller
        controllerName = atmosphereDepth
        // Type fo combination
        combinationType = MULTIPLY

        // The object to scale
        transformName = B_NozzlePlume
        xCurve
        {
          key = 0 2
          key = 1 .5
        }
        yCurve
        {
          key = 0 0.14
          key = 1 .29
        }
        zCurve
        {
          key = 0 2
          key = 1 .5
        }
      }
    }

  }
}